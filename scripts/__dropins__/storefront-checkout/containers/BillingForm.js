import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=5340;export const ids=[5340];export const modules={8572:(e,t,r)=>{r.d(t,{_:()=>G,i:()=>z});var i=r(2532),n=r(4944),o=r(3792),l=r(3388),s=r(8412),a=()=>(0,s.im)(l.W,{className:"bill-to-shipping-address__skeleton",children:(0,s.im)(l.K,{variant:"row",size:"small"})}),c=r(5536),d=r.n(c),p=r(7008),u=r.n(p),f=r(1496),b=r.n(f),m=r(9356),y=r.n(m),g=r(9904),v=r.n(g),h=r(9960),j={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.22.0-alpha1"}};j.styleTagTransform=function(e,t){setTimeout((()=>{window.window._loadedStyles=window.window._loadedStyles??{};const{core:r,sdk:i}=function(e,t){const r=e?.match(/^\.dropin-(\w+)/)?.[1],i=t.getAttribute("data-sdk");return{core:r,sdk:i}}(e,t),n=r?`sdk/${r}`:t.getAttribute("data-dropin");!function(e,t){e.setAttribute("data-dropin",t),e.removeAttribute("data-sdk")}(t,n);const o=window._loadedStyles[n];o?function(e,t,r,i){const n=function(e,t){const r=e=>{const[t,r]=e.split("-"),[i,n,o]=t.split(".").map(Number),l=r?r.match(/(alpha|beta)(\d*)/):null;return{major:i,minor:n,patch:o,preType:l?l[1]:"",preNumber:l?parseInt(l[2],10):0}},i=r(e),n=r(t);if(i.major!==n.major)return i.major>n.major?e:t;if(i.minor!==n.minor)return i.minor>n.minor?e:t;if(i.patch!==n.patch)return i.patch>n.patch?e:t;if(i.preType&&n.preType)return i.preType===n.preType?i.preNumber>n.preNumber?e:t:"beta"===i.preType?t:e;return i.preType?t:e}(r,i.sdk);if(!i.core||i.core&&n===i.sdk){const t=i.style.textContent;i.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else i.core&&n!==i.sdk&&(i.style.textContent=`/* --- UPGRADED --- */\n${e}`);t.remove()}(e,t,i,o):(function(e,t,r,i,n){t.textContent=e,window._loadedStyles[n]={sdk:i,core:r,style:t}}(e,t,r,i,n),function(e,t){const r=document.querySelector("head"),{lastDropinStyleInjected:i,lastSDKStyleInjected:n}=window._loadedStyles;t?(n?r.insertBefore(e,n.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastSDKStyleInjected=e):(i?r.insertBefore(e,i.nextSibling):n?r.insertBefore(e,n.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastDropinStyleInjected=e)}(t,r))}),0)},j.setAttributes=y(),j.insert=b().bind(null,"head"),j.domAPI=u(),j.insertStyleElement=v();d()(h.c,j);h.c&&h.c.locals&&h.c.locals;var O=r(2460),S=["className","isInitialized","checked"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var B=e=>{var{className:t,isInitialized:r=!0,checked:i=!0}=e,l=_(e,S),c=(0,O.cF)({title:"Checkout.BillToShippingAddress.title"});return r?(0,s.im)("div",{className:(0,n.i)(["checkout-bill-to-shipping-address",t]),children:(0,s.im)(o.y,k({"data-testid":"bill-to-shipping-checkbox",className:"checkout-bill-to-shipping-address__checkbox",checked:i,name:"checkout-bill-to-shipping-address__checkbox",label:c.title},l))}):(0,s.im)(a,{})},x=r(5668),A=r(9488),I=r(2796),T=r(40),C=r(2236),D=["children"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z(e,t,r){return!t&&!r||!(!t||!r)&&e.every((e=>{var i=e.code;return function(e,t,r){var i=e[r],n=t[r];return void 0===i&&void 0===n||null===i&&null===n||("object"==typeof i&&"object"==typeof n?JSON.stringify(i)===JSON.stringify(n):i===n)}(t,r,i)}))}var G=e=>{var{children:t}=e,r=F(e,D),{data:n}=x.cartSignal.value,o=(null==n?void 0:n.id)||"",l=A.isBillToShippingSignal.value.checked,{isInitialized:a}=(e=>{var t,{isBillToShipping:r}=e,[i,n]=(0,I.oT)(!1),{fields:o}=(0,C.q)(),l=x.cartSignal.value.data,s=!!l,a=null==l?void 0:l.billingAddress,c=null==l||null===(t=l.shippingAddresses)||void 0===t?void 0:t[0];return(0,I.YB)((()=>{if(o){var e=localStorage.getItem(T.c);if(!i&&e)return n(!0),void(r.value={checked:"true"===e,setByUser:!1});if(!i&&s){n(!0);var t=z(o,a,c);r.value={checked:null!=l&&l.billingAddress?t:r.value.checked,setByUser:!1}}}}),[a,null==l?void 0:l.billingAddress,o,s,r,i,c]),{isInitialized:i}})({isBillToShipping:A.isBillToShippingSignal});return(0,s.im)(B,E(E({},r),{},{checked:l,isInitialized:a,onChange:e=>{var t,r=e.target.checked,n=x.cartSignal.value.data,l=Boolean(null==n||null===(t=n.shippingAddresses)||void 0===t?void 0:t[0]);if(A.isBillToShippingSignal.value={checked:r,setByUser:!0},localStorage.setItem(T.c,r.toString()),a&&r&&l){var s=new AbortController;return(0,i.W)({signal:s.signal,cartId:o,input:{same_as_shipping:!0}}).catch((e=>{console.error(e)})),()=>{s.abort()}}},disabled:x.cartSignal.value.pending}))}},40:(e,t,r)=>{r.d(t,{c:()=>i});var i="is_bill_to_shipping_address"},2872:(e,t,r)=>{r.d(t,{M:()=>g});var i=r(2532),n=r(9296),o=r(8488),l=r(8572),s=r(6476),a=r(2236),c=r(8628),d=r(5668),p=r(9488),u=r(2796),f=r(8412);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=e=>{var{fields:t}=(0,a.q)(),r=(0,u.yK)(null),{data:b}=d.cartSignal.value,y=(null==b?void 0:b.id)||"",{checked:g,setByUser:v}=p.isBillToShippingSignal.value,h=!g,j=(0,u.kZ)((e=>(0,i.W)({signal:e.signal,cartId:y,input:{address:g?void 0:(0,n.ek)(e.address),same_as_shipping:g}})),[y,g]),O=(0,u.kZ)((()=>{var e,r=d.cartSignal.value.data;return!(0,l.i)(t,null==r?void 0:r.billingAddress,null==r||null===(e=r.shippingAddresses)||void 0===e?void 0:e[0])}),[t]);return(0,u.YB)((()=>{if(v){var e=new AbortController;return g||r.current.triggerSaveAddress(e.signal),()=>{e.abort()}}}),[g,v]),(0,f.im)(o.i,m(m({},e),{},{addressType:c.y.BILLING,"data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:s.M,ref:r,saveAddressHandler:j,shouldAutoFillForm:O,style:{display:h?"block":"none"}}))}},6476:(e,t,r)=>{r.d(t,{M:()=>i});var i="billing_address"},3084:(e,t,r)=>{r.d(t,{Mh:()=>n.M,Mx:()=>i.M,cp:()=>i.M});var i=r(2872),n=r(6476)},9960:(e,t,r)=>{r.d(t,{c:()=>s});var i=r(6008),n=r.n(i),o=r(2076),l=r.n(o)()(n());l.push([e.id,".checkout-bill-to-shipping-address{\n  display:grid;\n}\n\n.checkout-bill-to-shipping-address label{\n  font:var(--type-body-2-default-font);\n  letter-spacing:var(--type-body-2-default-letter-spacing);\n  gap:0;\n}\n",""]);const s=l},8122:(t,r,i)=>{t.exports=(e=>{var t={};return i.d(t,e),t})({events:()=>e.events})},8616:(e,r,i)=>{e.exports=(e=>{var t={};return i.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as i from"../8412.js";r.C(i);import*as n from"../2892.js";r.C(n);import*as o from"../184.js";r.C(o);import*as l from"../196.js";r.C(l);import*as s from"../4708.js";r.C(s);import*as a from"../8668.js";r.C(a);import*as c from"../5068.js";r.C(c);import*as d from"../1568.js";r.C(d);import*as p from"../8100.js";r.C(p);import*as u from"./BillingForm.js";r.C(u);var f,b=(f=3084,r(r.s=f)),m=b.Mh,y=b.Mx,g=b.cp;export{m as BILLING_FORM_NAME,y as BillingForm,g as default};