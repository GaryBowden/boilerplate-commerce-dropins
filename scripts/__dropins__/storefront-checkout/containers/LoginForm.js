import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=9160;export const ids=[9160];export const modules={8884:(e,t,r)=>{r.d(t,{i:()=>n});var n=e=>e.reduce(((e,t)=>{if(!t)return e;if("string"==typeof t&&(e+=" ".concat(t)),Array.isArray(t)){var[r,n]=t;r&&n&&(e+=" ".concat(r))}return e}),"").trim()},9496:(e,t,r)=>{r.d(t,{s:()=>s});var n=r(3584),i=r(3760),o=r(764),a=r(1092);function l(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}var s=function(){var e,t=(e=function*(e){if(!e)throw new i.ET;var{data:t,errors:r}=yield(0,n.CA)("\n  query isEmailAvailable($email: String!) {\n    isEmailAvailable(email: $email) {\n      is_email_available\n    }\n  }\n",{method:"GET",cache:"no-cache",variables:{email:e}}).catch(a.i);return r&&(0,o.Y)(r),(e=>Boolean(null==e?void 0:e.is_email_available))(t.isEmailAvailable)},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},4628:(e,t,r)=>{r.d(t,{S:()=>c});var n=r(3760),i=r(3112),o="\n  mutation setGuestEmail($cartId: String!, $email: String!) {\n    setGuestEmailOnCart(input: { cart_id: $cartId, email: $email }) {\n      cart {\n        id\n        ...CheckoutData\n        ...CartSummaryItems\n      }\n    }\n  }\n  ".concat(i.e2,"\n  ").concat(i.Qz,"\n"),a=r(9120),l=r(6824);function s(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}var c=function(){var e,t=(e=function*(e){var{cartId:t,email:r}=e;if(!t)throw new n.Ij;return yield(0,a.m)({type:"mutation",query:o,options:{variables:{cartId:t,email:r}},path:"setGuestEmailOnCart.cart",signalType:"cart",transformer:l.o})},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},2216:(e,t,r)=>{r.d(t,{_:()=>v});var n=r(5536),i=r.n(n),o=r(7008),a=r.n(o),l=r(1496),s=r.n(l),c=r(9356),u=r.n(c),d=r(9904),m=r.n(d),f=r(7696),p={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"},styleTagTransform:function(e,t){window._loadedStyles=window._loadedStyles??{};const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk"),i=r?`sdk/${r}`:t.getAttribute("data-dropin");t.setAttribute("data-dropin",i),t.removeAttribute("data-sdk");const o=window._loadedStyles[i];if(o){const i=function(e,t){const[r,n]=e.split("-"),[i,o]=t.split("-"),a=[...r.split("."),n],l=[...i.split("."),o],s=parseInt(a[0],10),c=parseInt(l[0],10);if(s!==c)return s>c?e:t;const u=parseInt(a[1],10),d=parseInt(l[1],10);if(u!==d)return u>d?e:t;const m=parseInt(a[2],10),f=parseInt(l[2],10);if(m!==f)return m>f?e:t;if(a[3]&&l[3]){const r=/(alpha|beta)(.*)/,n=a[3].match(r),i=l[3].match(r),o=n[1],s=i[1],c=parseInt(n[2],10),u=parseInt(i[2],10);if(o===s)return c>u?e:t;if("alpha"===o&&"beta"===s)return t;if("beta"===o&&"alpha"===s)return e}return a[3]?t:e}(n,o.sdk);if(!r||r&&i===o.sdk){const t=o.style.textContent;o.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else r&&i!==o.sdk&&(o.style.textContent=`/* --- UPGRADED --- */\n${e}`);return void t.remove()}t.textContent=e,window._loadedStyles[i]={sdk:n,core:r,style:t};const a=document.querySelector("head"),{lastDropinStyleInjected:l,lastSDKStyleInjected:s}=window._loadedStyles;r?(s?a.insertBefore(t,s.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastSDKStyleInjected=t):(l?a.insertBefore(t,l.nextSibling):s?a.insertBefore(t,s.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastDropinStyleInjected=t)}};p.setAttributes=u(),p.insert=s().bind(null,"head"),p.domAPI=a(),p.insertStyleElement=m();i()(f.c,p);f.c&&f.c.locals&&f.c.locals;var g=r(9888),v=e=>{var{className:t,children:r,level:n=2}=e,i=n>=1&&n<=6?"h".concat(n):"h2";return(0,g.im)(i,{className:t,children:r})}},2408:(e,t,r)=>{r.d(t,{u:()=>$});var n=r(9496),i=r(4628),o=r(2216),a=r(8300),l=r(9888),s=()=>(0,l.YH)("p",{className:"checkout-login-form__signIn",children:[(0,l.im)(a.a,{id:"Checkout.LoginForm.account"}),(0,l.im)("a",{className:"checkout-login-form__link",href:"#",target:"_blank",rel:"noreferrer",children:(0,l.im)(a.a,{id:"Checkout.LoginForm.signIn"})})]}),c=r(4248),u=r(9400),d=e=>{var{value:t,error:r,hint:n,onChange:i,onBlur:o,onInvalid:s}=e,d=(0,a.cF)({LoginFormLabel:"Checkout.LoginForm.ariaLabel",LoginFormFloatingLabel:"Checkout.LoginForm.floatingLabel",LoginFormPlaceholder:"Checkout.LoginForm.placeholder"});return(0,l.im)(c.I,{size:"medium",error:r,hint:n,children:(0,l.im)(u.E,{id:"customer-email",name:"userName",type:"email",value:t,autocomplete:"email",placeholder:d.LoginFormPlaceholder,floatingLabel:d.LoginFormFloatingLabel,onChange:i,onBlur:o,onInvalid:s,required:!0,"aria-label":d.LoginFormLabel,"aria-required":!0})})},m=r(5536),f=r.n(m),p=r(7008),g=r.n(p),v=r(1496),h=r.n(v),y=r(9356),b=r.n(y),w=r(9904),E=r.n(w),O=r(6004),S={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"},styleTagTransform:function(e,t){window._loadedStyles=window._loadedStyles??{};const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk"),i=r?`sdk/${r}`:t.getAttribute("data-dropin");t.setAttribute("data-dropin",i),t.removeAttribute("data-sdk");const o=window._loadedStyles[i];if(o){const i=function(e,t){const[r,n]=e.split("-"),[i,o]=t.split("-"),a=[...r.split("."),n],l=[...i.split("."),o],s=parseInt(a[0],10),c=parseInt(l[0],10);if(s!==c)return s>c?e:t;const u=parseInt(a[1],10),d=parseInt(l[1],10);if(u!==d)return u>d?e:t;const m=parseInt(a[2],10),f=parseInt(l[2],10);if(m!==f)return m>f?e:t;if(a[3]&&l[3]){const r=/(alpha|beta)(.*)/,n=a[3].match(r),i=l[3].match(r),o=n[1],s=i[1],c=parseInt(n[2],10),u=parseInt(i[2],10);if(o===s)return c>u?e:t;if("alpha"===o&&"beta"===s)return t;if("beta"===o&&"alpha"===s)return e}return a[3]?t:e}(n,o.sdk);if(!r||r&&i===o.sdk){const t=o.style.textContent;o.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else r&&i!==o.sdk&&(o.style.textContent=`/* --- UPGRADED --- */\n${e}`);return void t.remove()}t.textContent=e,window._loadedStyles[i]={sdk:n,core:r,style:t};const a=document.querySelector("head"),{lastDropinStyleInjected:l,lastSDKStyleInjected:s}=window._loadedStyles;r?(s?a.insertBefore(t,s.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastSDKStyleInjected=t):(l?a.insertBefore(t,l.nextSibling):s?a.insertBefore(t,s.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastDropinStyleInjected=t)}};S.setAttributes=b(),S.insert=h().bind(null,"head"),S.domAPI=g(),S.insertStyleElement=E();f()(O.c,S);O.c&&O.c.locals&&O.c.locals;var j=r(8884),I=["name","className","currentEmail","hint","error","onEmailChange","onEmailBlur","onEmailInvalid"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=e=>{var{name:t,className:r,currentEmail:n,hint:i,error:c=null,onEmailChange:u,onEmailBlur:m,onEmailInvalid:f}=e,p=C(e,I),g=(0,a.cF)({Title:"Checkout.LoginForm.title"});return(0,l.YH)("div",k(k({},p),{},{className:(0,j.i)(["checkout-login-form",r]),children:[(0,l.YH)("div",{className:"checkout-login-form__heading",children:[(0,l.im)(o._,{level:2,className:"checkout-login-form__title",children:g.Title}),(0,l.im)(s,{})]}),(0,l.im)("div",{className:"checkout-login-form__content",children:(0,l.YH)("form",{className:(0,j.i)(["dropin-login-form__form",r]),name:t,noValidate:!0,children:[(0,l.im)("button",{type:"submit",disabled:!0,style:"display: none","aria-hidden":"true"}),(0,l.im)(d,{value:n||void 0,error:c||"",hint:i,onChange:u,onBlur:m,onInvalid:f})]})})]}))},L=r(9392),F=r(2248),D=r(5668),A=["className","email"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var $=e=>{var{className:t,email:r=null}=e,o=T(e,A),s=(0,a.cF)({LoginFormInvalidEmailError:"Checkout.LoginForm.invalidEmailError",LoginFormMissingEmailError:"Checkout.LoginForm.missingEmailError",LoginFormEmailExists:"Checkout.LoginForm.emailExists"}),{data:c}=D.cartSignal.value,u=(null==c?void 0:c.id)||"",d=!!c,[m,f]=(0,L.oT)(!1),[p,g]=(0,L.oT)(r),[v,h]=(0,L.oT)(),[y,b]=(0,L.oT)(!0),w=e=>e.valid?null:e.valueMissing?s.LoginFormMissingEmailError:s.LoginFormInvalidEmailError;return!m&&d&&(f(!0),g((null==c?void 0:c.email)||r)),(0,L.YB)((()=>{if(p&&!v&&(null==c?void 0:c.email)!==p){var e=setTimeout((()=>{(0,n.s)(p).then((e=>{b(e),(0,i.S)({cartId:u,email:p}).catch((e=>{console.log("set email failed",e)}))})).catch((e=>{console.log(e),h(s.LoginFormInvalidEmailError),b(!0)}))}),1e3);return()=>{e&&clearTimeout(e)}}}),[p,v,s.LoginFormInvalidEmailError,null==c?void 0:c.email,u]),(0,l.im)(P,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:t,currentEmail:p,error:v,hint:y?"":s.LoginFormEmailExists,name:F.i,onEmailBlur:e=>{var{validity:t}=e.target;h(w(t))},onEmailChange:e=>{var{value:t}=e.target;g(t),h(null),b(!0)},onEmailInvalid:e=>{var{validity:t}=e.target;h(w(t))}},o))}},2248:(e,t,r)=>{r.d(t,{i:()=>n});var n="login-form"},5600:(e,t,r)=>{r.d(t,{cp:()=>i.u,iO:()=>n.i,uY:()=>i.u});var n=r(2248),i=r(2408)},7696:(e,t,r)=>{r.d(t,{c:()=>l});var n=r(6008),i=r.n(n),o=r(2076),a=r.n(o)()(i());a.push([e.id,"\n",""]);const l=a},6004:(e,t,r)=>{r.d(t,{c:()=>l});var n=r(6008),i=r.n(n),o=r(2076),a=r.n(o)()(i());a.push([e.id,".checkout-login-form{\n    display:grid;\n}\n\n.checkout-login-form__heading{\n    display:grid;\n    grid-template-columns:repeat(2, 1fr [col-start]);\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__content{\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__title{\n    grid-column-start:1;\n    color:var(--color-neutral-800);\n    font:var(--type-headline-2-default-font);\n    letter-spacing:var(--type-headline-2-default-letter-spacing);\n    margin:0;\n}\n\n.checkout-login-form__signIn{\n    grid-column-start:2;\n    color:var(--color-neutral-800);\n    font:var(--type-body-2-default-font);\n    letter-spacing:var(--type-body-2-default-letter-spacing);\n    margin-bottom:var(--spacing-medium);\n    align-self:flex-end;\n    justify-self:flex-end;\n    margin-top:var(--spacing-xxsmall);\n}\n\na.checkout-login-form__link{\n    font:var(--type-body-2-strong-font);\n    margin-left:var(--spacing-xxsmall);\n}\n@media only screen and (min-width:320px) and (max-width: 768px){\n    .checkout-login-form__heading{\n        grid-template-columns:repeat(1, 1fr [col-start]);\n        grid-template-rows:1fr;\n    }\n\n    .checkout-login-form__signIn{\n        grid-column-start:1;\n        align-self:flex-start;\n        justify-self:flex-start;\n        padding-top:var(--spacing-xsmall);\n    }\n}\n",""]);const l=a},8122:(t,r,n)=>{t.exports=(e=>{var t={};return n.d(t,e),t})({events:()=>e.events})},8616:(e,r,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as n from"../9888.js";r.C(n);import*as i from"../2172.js";r.C(i);import*as o from"../8668.js";r.C(o);import*as a from"../5068.js";r.C(a);import*as l from"../7940.js";r.C(l);import*as s from"./LoginForm.js";r.C(s);var c,u=(c=5600,r(r.s=c)),d=u.iO,m=u.uY,f=u.cp;export{d as LOGIN_FORM_NAME,m as LoginForm,f as default};