import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";import*as r from"@dropins/tools/preact-compat.js";import*as n from"@dropins/tools/preact-hooks.js";import*as a from"@dropins/tools/preact-jsx-runtime.js";import*as i from"@dropins/tools/preact.js";export const id=836;export const ids=[836];export const modules={5416:(e,t,r)=>{r.d(t,{Y:()=>$,c:()=>$});var n=r(6528),a=r(2336),i=r(8122),o=r(8884),s=r(4496),c=r(8156),l=r(8300),d=r(5536),u=r.n(d),p=r(7008),m=r.n(p),f=r(1496),y=r.n(f),g=r(9356),v=r.n(g),h=r(9904),b=r.n(h),j=r(5984),x={attributes:{"data-dropin":"storefront-cart","data-sdk":"0.21.2"}};x.styleTagTransform=function(e,t){setTimeout((()=>{window.window._loadedStyles=window.window._loadedStyles??{};const{core:r,sdk:n}=function(e,t){const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk");return{core:r,sdk:n}}(e,t),a=r?`sdk/${r}`:t.getAttribute("data-dropin");!function(e,t){e.setAttribute("data-dropin",t),e.removeAttribute("data-sdk")}(t,a);const i=window._loadedStyles[a];i?function(e,t,r,n){const a=function(e,t){const r=e=>{const[t,r]=e.split("-"),[n,a,i]=t.split(".").map(Number),o=r?r.match(/(alpha|beta)(\d*)/):null;return{major:n,minor:a,patch:i,preType:o?o[1]:"",preNumber:o?parseInt(o[2],10):0}},n=r(e),a=r(t);if(n.major!==a.major)return n.major>a.major?e:t;if(n.minor!==a.minor)return n.minor>a.minor?e:t;if(n.patch!==a.patch)return n.patch>a.patch?e:t;if(n.preType&&a.preType)return n.preType===a.preType?n.preNumber>a.preNumber?e:t:"beta"===n.preType?t:e;return n.preType?t:e}(r,n.sdk);if(!n.core||n.core&&a===n.sdk){const t=n.style.textContent;n.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else n.core&&a!==n.sdk&&(n.style.textContent=`/* --- UPGRADED --- */\n${e}`);t.remove()}(e,t,n,i):(function(e,t,r,n,a){t.textContent=e,window._loadedStyles[a]={sdk:n,core:r,style:t}}(e,t,r,n,a),function(e,t){const r=document.querySelector("head"),{lastDropinStyleInjected:n,lastSDKStyleInjected:a}=window._loadedStyles;t?(a?r.insertBefore(e,a.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastSDKStyleInjected=e):(n?r.insertBefore(e,n.nextSibling):a?r.insertBefore(e,a.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastDropinStyleInjected=e)}(t,r))}),0)},x.setAttributes=v(),x.insert=y().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=b();u()(j.c,x);j.c&&j.c.locals&&j.c.locals;var C=r(5092),w=["className","children","emptyCart","heading","products","estimatedTotal","ctas"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var P=e=>{var{className:t,children:r,emptyCart:n,heading:a,products:i,estimatedTotal:d,ctas:u}=e,p=S(e,w),m=(0,l.cF)({estimatedTotal:"Cart.MiniCart.estimatedTotal"});return(0,C.jsxs)("div",_(_({},p),{},{className:(0,o.i)(["cart-mini-cart",t]),children:[i&&a&&(0,C.jsxs)("div",{className:"cart-mini-cart__heading",children:[(0,C.jsx)(s.o,{node:a,className:"cart-mini-cart__heading-text"}),(0,C.jsx)(c.c,{variant:"primary",className:"cart-mini-cart__heading-divider"})]}),i?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"cart-mini-cart__products",children:i}),(0,C.jsxs)("div",{className:"cart-mini-cart__footer",children:[d&&(0,C.jsxs)("div",{className:"cart-mini-cart__footer__estimated-total",children:[m.estimatedTotal,(0,C.jsx)(s.o,{node:d})]}),u&&(0,C.jsx)(s.o,{node:u,className:"cart-mini-cart__footer__ctas"})]})]}):(0,C.jsx)(s.o,{node:n,className:"cart-mini-cart__empty-cart"})]}))},E=r(6792),T=r(3972),I=r(8308),D=r(8584),N=r(8264),A=r(1684),L=r(1580),M=r(7192),R=r(7218),F=["children","initialData","routeProduct","routeCart","routeCheckout","routeEmptyCartCTA"];function q(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){q(i,n,a,o,s,"next",e)}function s(e){q(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var $=e=>{var t,r,a,{children:o,initialData:s=null,routeProduct:c,routeCart:d,routeCheckout:u,routeEmptyCartCTA:p}=e,m=G(e,F),[f,y]=(0,n.useState)(s),[g,v]=(0,n.useState)(new Set),h=(e,t)=>{v((r=>(e?r.add(t):r.delete(t),new Set(r))))};(0,n.useEffect)((()=>{var e=i.events.on("cart/data",(e=>{y(e)}),{eager:!0});return()=>{null==e||e.off()}}),[]);var b=(0,l.cF)({cartLink:"Cart.MiniCart.cartLink",checkoutLink:"Cart.MiniCart.checkoutLink",discountedPrice:"Cart.CartItem.discountedPrice",heading:"Cart.MiniCart.heading",message:"Cart.CartItem.message",recipient:"Cart.CartItem.recipient",regularPrice:"Cart.CartItem.regularPrice",sender:"Cart.CartItem.sender",file:"Cart.CartItem.file",files:"Cart.CartItem.files"});return(0,n.useEffect)((()=>{s&&Object.keys(s).length>0&&(0,M.Ws)(s,R.K.locale||"en-US")}),[s]),(0,C.jsx)(P,B(B({},m),{},{heading:(0,C.jsx)("div",{children:b.heading.replace("{count}",(null!==(t=null==f?void 0:f.totalQuantity)&&void 0!==t?t:0).toString())}),emptyCart:(0,C.jsx)(E.Q,{ctaLinkURL:null==p?void 0:p()}),estimatedTotal:(null==f?void 0:f.total)&&(0,C.jsx)(T.Y,{amount:null==f?void 0:f.total.value,currency:null==f?void 0:f.total.currency,style:{font:"inherit"}}),ctas:(0,C.jsxs)("div",{children:[u&&(0,C.jsx)(I.q,{variant:"primary",href:u(),children:b.checkoutLink}),d&&(0,C.jsx)(I.q,{variant:"tertiary",href:d(),children:b.cartLink})]}),products:null!==(r=null==f?void 0:f.totalQuantity)&&void 0!==r&&r?(0,C.jsx)(D.A,{children:null==f||null===(a=f.miniCartMaxItems)||void 0===a?void 0:a.map(((e,t)=>{var r,n,a,i,o,s=g.has(e.uid),l=B(B(B(B(B(B(B({},null!==(r=e.selectedOptions)&&void 0!==r?r:{}),e.recipient?{[b.recipient]:e.recipient}:{}),e.recipientEmail&&e.recipient?{[b.recipient]:"".concat(e.recipient," (").concat(e.recipientEmail,")")}:{}),e.sender?{[b.sender]:e.sender}:{}),e.senderEmail&&e.sender?{[b.sender]:"".concat(e.sender," (").concat(e.senderEmail,")")}:{}),e.message?{[b.message]:e.message}:{}),e.links&&e.links.count?e.links.count>1?{[b.files.replace("{count}",e.links.count.toString())]:e.links.result}:{[b.file.replace("{count}",e.links.count.toString())]:e.links.result}:{});return(0,C.jsx)(N.Y,{"data-testid":"cart-item",updating:s,image:c?(0,C.jsx)("a",{href:c(e),children:(0,C.jsx)(A.W,{loading:t<4?"eager":"lazy",src:e.image.src,alt:e.image.alt,width:"300",height:"300",params:{width:300}})}):(0,C.jsx)(A.W,{loading:t<4?"eager":"lazy",src:e.image.src,alt:e.image.alt,width:"300",height:"300",params:{width:300}}),title:(0,C.jsx)("span",{children:c?(0,C.jsx)("a",{href:c(e),children:e.name}):e.name}),sku:(0,C.jsx)("span",{children:e.sku}),configurations:Object.keys(l).length>0?l:void 0,quantity:e.quantity,price:(0,C.jsx)(T.Y,{amount:null===(n=e.regularPrice)||void 0===n?void 0:n.value,currency:null===(a=e.regularPrice)||void 0===a?void 0:a.currency,weight:"normal"}),total:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.Y,{amount:e.total.value,currency:e.total.currency,variant:e.discounted?"strikethrough":"default","data-testid":"regular-total","aria-label":b.regularPrice}),e.discounted&&(0,C.jsx)(T.Y,{amount:null===(i=e.discountedTotal)||void 0===i?void 0:i.value,currency:null===(o=e.discountedTotal)||void 0===o?void 0:o.currency,sale:e.discounted,"data-testid":"discount-total","aria-label":b.discountedPrice})]}),onRemove:()=>{var t,r;t=e.uid,r=0,h(!0,t),(0,L.E)([{uid:t,quantity:r}]).finally((()=>{h(!1,t)}))}},e.uid)}))}):void 0}))};$.getInitialData=z((function*(){return(0,a.u)()}))},5984:(e,t,r)=>{r.d(t,{c:()=>s});var n=r(6008),a=r.n(n),i=r(2076),o=r.n(i)()(a());o.push([e.id,".cart-mini-cart{\n  display:flex;\n  flex-direction:column;\n  height:100%;\n  padding:var(--spacing-small) var(--spacing-small) var(--spacing-medium);\n  box-sizing:border-box;\n}\n\n.cart-mini-cart__empty-cart{\n  width:100%;\n  max-width:800px;\n  height:100%;\n  display:flex;\n  flex-direction:column;\n  justify-content:center;\n  align-self:center;\n}\n\n.cart-mini-cart__heading{\n  display:grid;\n  row-gap:var(--spacing-xsmall);\n  font:var(--type-headline-2-default-font);\n  letter-spacing:var(--type-headline-2-default-letter-spacing);\n}\n\n.cart-mini-cart__heading-divider{\n  width:100%;\n  margin:var(--spacing-xxsmall) 0 0 0;\n}\n\n.cart-mini-cart__products{\n  flex:1;\n  overflow-y:auto;\n  max-height:100%;\n  padding-top:var(--spacing-medium);\n  padding-bottom:var(--spacing-medium);\n}\n\n.cart-mini-cart__products .dropin-cart-item__configurations li{\n  display:-webkit-box;\n  -webkit-line-clamp:2;\n  -webkit-box-orient:vertical;\n  overflow:hidden;\n}\n\n.cart-mini-cart__footer{\n  display:grid;\n  grid-auto-flow:row;\n  gap:var(--spacing-small);\n  padding-top:var(--spacing-small);\n}\n\n.cart-mini-cart__footer__estimated-total{\n  font:var(--type-body-1-emphasized-font);\n  letter-spacing:var(--type-body-1-emphasized-letter-spacing);\n  display:grid;\n  grid-template:max-content / 1fr auto;\n  gap:var(--spacing-xsmall);\n}\n\n.cart-mini-cart__footer__ctas{\n  display:grid;\n  grid-auto-flow:row;\n  gap:var(--spacing-xsmall);\n}\n",""]);const s=o},8122:(t,r,n)=>{t.exports=(e=>{var t={};return n.d(t,e),t})({events:()=>e.events})},8616:(e,r,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})},6528:(e,t,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({Children:()=>r.Children,Suspense:()=>r.Suspense,createContext:()=>r.createContext,lazy:()=>r.lazy,useCallback:()=>r.useCallback,useContext:()=>r.useContext,useEffect:()=>r.useEffect,useMemo:()=>r.useMemo,useRef:()=>r.useRef,useState:()=>r.useState})},2720:(e,t,r)=>{e.exports=(e=>{var t={};return r.d(t,e),t})({useCallback:()=>n.useCallback,useContext:()=>n.useContext,useDebugValue:()=>n.useDebugValue,useEffect:()=>n.useEffect,useId:()=>n.useId,useImperativeHandle:()=>n.useImperativeHandle,useLayoutEffect:()=>n.useLayoutEffect,useMemo:()=>n.useMemo,useReducer:()=>n.useReducer,useRef:()=>n.useRef,useState:()=>n.useState})},6168:(e,t,r)=>{e.exports=(e=>{var t={};return r.d(t,e),t})({Fragment:()=>a.Fragment,jsx:()=>a.jsx,jsxs:()=>a.jsxs})},7320:(e,t,r)=>{e.exports=(e=>{var t={};return r.d(t,e),t})({Component:()=>i.Component,Fragment:()=>i.Fragment,cloneElement:()=>i.cloneElement,createContext:()=>i.createContext,createElement:()=>i.createElement,createRef:()=>i.createRef,h:()=>i.h,hydrate:()=>i.hydrate,options:()=>i.options,render:()=>i.render,toChildArray:()=>i.toChildArray})}};import o from"../runtime.js";import*as s from"../56.js";o.C(s);import*as c from"../928.js";o.C(c);import*as l from"../152.js";o.C(l);import*as d from"../704.js";o.C(d);import*as u from"./MiniCart.js";o.C(u);var p,m=(p=5416,o(o.s=p)),f=m.Y,y=m.c;export{f as MiniCart,y as default};